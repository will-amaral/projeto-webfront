{"version":3,"file":"static/webpack/static/development/pages/_app.js.33007aaf54f064d48072.hot-update.js","sources":["webpack:///./utils/auth.js"],"sourcesContent":["import Router from 'next/router';\nimport cookie from 'js-cookie';\nimport nextCookie from 'next-cookies';\nimport { setHeader } from './api';\n\nexport function login(token) {\n    cookie.set('token', token, { expires: 1 });\n    Router.push('/')\n}\n\nexport function logout() {\n    cookie.remove('token');\n    Router.push('/login');\n}\n\nexport function auth(ctx) {\n    const { token } = nextCookie(ctx);\n\n    if (ctx.req && !token) {\n        console.log('Não existem cookies')\n        ctx.res.writeHead(302, { Location: '/login' });\n        ctx.res.end()\n    }\n\n    if (!token) {\n        console.log('Não existe token')\n        Router.push('/login');\n    }\n    console.log('Cookie: ' + token)\n    return token\n}\n\nexport function withAuth(WrappedComponent) {\n    function Wrapper(props) {\n        return <WrappedComponent {...props} />\n    }\n  \n    Wrapper.getInitialProps = async function(ctx) {\n        const token = auth(ctx);\n        setHeader(token);\n      \n        const componentProps =\n            WrappedComponent.getInitialProps &&\n            (await WrappedComponent.getInitialProps(ctx))\n  \n        return { ...componentProps, token }\n    }\n  \n    return Wrapper\n  }"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAIA;AAJA;AAQA;AARA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAUA;AACA;;;;A","sourceRoot":""}