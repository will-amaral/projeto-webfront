{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/will/Documents/School/Projeto-IFSP/projeto-webfront/components/Login/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport { Hero, HeroBody, Container, Title, Subtitle, Columns, Column } from 'bloomer';\nimport Router from 'next/router';\nimport CustomNotification from '../CustomNotification';\nimport Form from './Form';\nimport api from '../../utils/api';\nimport { login } from '../../utils/auth';\nvar backgroundStyles = {\n  background: \"linear-gradient(\\n        rgba(0, 158, 108, 0.5),\\n        rgba(0, 0, 0, 0.5)\\n      ), url(/static/img/bg.jpg) no-repeat center center fixed\",\n  backgroundSize: 'cover'\n};\nexport default function Login() {\n  var _useState = useState(''),\n      message = _useState[0],\n      setMessage = _useState[1];\n\n  var _useState2 = useState(''),\n      color = _useState2[0],\n      setColor = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  function handleSubmit(_x, _x2, _x3) {\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(event, email, password) {\n      var _ref, token, alert;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n\n              if (!(!email || !password)) {\n                _context.next = 6;\n                break;\n              }\n\n              setMessage('Preencha todos os campos para continuar!');\n              setColor('danger');\n              _context.next = 22;\n              break;\n\n            case 6:\n              setLoading(true);\n              _context.prev = 7;\n              _context.next = 10;\n              return api.post('/login', {\n                email: email,\n                password: password\n              });\n\n            case 10:\n              _ref = _context.sent;\n              token = _ref.data.token;\n              login(token);\n              Router.push('/');\n              _context.next = 21;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](7);\n              alert = !_context.t0.response ? \"Erro de rede\" : _context.t0.response.data.message;\n              setMessage(alert);\n              setColor('danger');\n\n            case 21:\n              setLoading(false);\n\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[7, 16]]);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  ;\n  return __jsx(Columns, {\n    isVCentered: true,\n    isGapless: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, __jsx(Column, {\n    isSize: {\n      mobile: \"full\",\n      desktop: \"1/4\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, __jsx(Hero, {\n    isColor: \"primary\",\n    isFullHeight: true,\n    isBold: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, __jsx(HeroBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, __jsx(Container, {\n    hasTextAlign: \"centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, __jsx(Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Gym App\"), __jsx(Subtitle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"Fa\\xE7a o login para prosseguir\"), __jsx(CustomNotification, {\n    message: message,\n    color: color,\n    close: function close() {\n      return setMessage('');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), __jsx(Form, {\n    loading: loading,\n    handleSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }))))), __jsx(Column, {\n    isHidden: \"touch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, __jsx(Hero, {\n    isFullHeight: true,\n    style: backgroundStyles,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/home/will/Documents/School/Projeto-IFSP/projeto-webfront/components/Login/index.js"],"names":["useState","Hero","HeroBody","Container","Title","Subtitle","Columns","Column","Router","CustomNotification","Form","api","login","backgroundStyles","background","backgroundSize","Login","message","setMessage","color","setColor","loading","setLoading","handleSubmit","event","email","password","preventDefault","post","token","data","push","alert","response","mobile","desktop"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { Hero, HeroBody, Container, Title,\n    Subtitle, Columns, Column \n} from 'bloomer';\nimport Router from 'next/router';\nimport CustomNotification from '../CustomNotification';\nimport Form from './Form';\nimport api from '../../utils/api';\nimport { login } from '../../utils/auth';\n\nconst backgroundStyles = {\n    background: `linear-gradient(\n        rgba(0, 158, 108, 0.5),\n        rgba(0, 0, 0, 0.5)\n      ), url(/static/img/bg.jpg) no-repeat center center fixed`,\n    backgroundSize: 'cover' \n}\n\nexport default function Login() {\n    const [message, setMessage] = useState('');\n    const [color, setColor] = useState('');\n    const [loading, setLoading] = useState(false);\n\n\n    async function handleSubmit(event, email, password){\n        event.preventDefault();\n        if (!email || !password) {\n            setMessage('Preencha todos os campos para continuar!');\n            setColor('danger');\n        } else {\n            setLoading(true);\n            try {\n                const { data: { token } } = await api.post('/login', { email, password });\n                login(token);\n                Router.push('/');\n            } catch (err) {\n                const alert = !err.response ? \"Erro de rede\" : err.response.data.message\n                setMessage(alert)\n                setColor('danger');\n            }\n            setLoading(false);\n        }\n    };\n\n    return(\n        <Columns isVCentered isGapless>\n            <Column isSize={{mobile: \"full\", desktop: \"1/4\" }}>\n                <Hero isColor=\"primary\" isFullHeight isBold>\n                    <HeroBody>\n                        <Container hasTextAlign=\"centered\">\n                            <Title>Gym App</Title>\n                            <Subtitle>Fa√ßa o login para prosseguir</Subtitle>\n                            <CustomNotification\n                                message={message}\n                                color={color}\n                                close={()=> setMessage('')}\n                            />\n                            <Form loading={loading} handleSubmit={handleSubmit} />\n                        </Container>\n                    </HeroBody>\n                </Hero>\n            </Column> \n            <Column isHidden=\"touch\">\n                <Hero isFullHeight style={backgroundStyles} />\n            </Column>               \n        </Columns>\n    );\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}