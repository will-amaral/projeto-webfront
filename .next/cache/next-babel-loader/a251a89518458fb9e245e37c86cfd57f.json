{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport { Hero, HeroBody, Container, Title, Subtitle, Columns, Column, Image } from 'bloomer';\nimport Router from 'next/router';\nimport CustomNotification from '../CustomNotification';\nimport Form from './Form';\nimport api from '../../utils/api';\nimport { login } from '../../utils/auth';\nimport styles from '../styles';\nexport default function Login() {\n  const {\n    0: message,\n    1: setMessage\n  } = useState('');\n  const {\n    0: color,\n    1: setColor\n  } = useState('');\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n\n  async function handleSubmit(event, email, password) {\n    event.preventDefault();\n\n    if (!email || !password) {\n      setMessage('Preencha todos os campos para continuar!');\n      setColor('danger');\n    } else {\n      setLoading(true);\n\n      try {\n        const {\n          data: {\n            token\n          }\n        } = await api.post('/login', {\n          email,\n          password\n        });\n        login(token);\n        Router.push('/');\n      } catch (err) {\n        console.log(err.response.data.message);\n        let alert;\n\n        if (!err.response) {\n          alert = 'Erro de servidor';\n        } else if (!err.response.data.message) {\n          alert = 'Senha incorreta';\n        } else {\n          alert = err.response.data.message;\n        }\n\n        setMessage(alert);\n        setColor('danger');\n        setLoading(false);\n      }\n    }\n  }\n\n  ;\n  return __jsx(Columns, {\n    isVCentered: true,\n    isGapless: true\n  }, __jsx(Column, {\n    isSize: {\n      mobile: \"full\",\n      desktop: \"1/4\"\n    }\n  }, __jsx(Hero, {\n    isColor: \"primary\",\n    isFullHeight: true,\n    style: styles.gradient\n  }, __jsx(HeroBody, null, __jsx(Container, {\n    hasTextAlign: \"centered\",\n    style: {\n      margin: 20\n    }\n  }, __jsx(Image, {\n    style: styles.logo,\n    src: \"/static/img/logo-white.png\"\n  }), __jsx(Title, null, \"Gym App\"), __jsx(Subtitle, null, \"Fa\\xE7a o login para prosseguir\"), __jsx(CustomNotification, {\n    message: message,\n    color: color,\n    close: () => setMessage('')\n  }), __jsx(Form, {\n    loading: loading,\n    handleSubmit: handleSubmit\n  }))))), __jsx(Column, {\n    isHidden: \"touch\"\n  }, __jsx(Hero, {\n    isFullHeight: true,\n    style: styles.background\n  })));\n}","map":null,"metadata":{},"sourceType":"module"}